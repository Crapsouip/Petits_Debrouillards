/*	MyMagicStick v_1.0
	Bibliotheque de fonction capteur Luminosite
	@author Daman Maximilien
*/

//Inclusion des librairies
	#include "Arduino.h"
	#include <math.h>
	#include "MyMagicStick.h"

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////CONSTRUCTEURS///////////////////////////////////
///////////////////////////////////////////////////////////////////////////////	
TemperatureSensor::TemperatureSensor()
{}

void TemperatureSensor::begin(uint8_t ConnectPin)
{
	Pin = ConnectPin;
	setError(0);
	readData();
}
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//////////////////////////////////ERRORLEVEL///////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
uint8_t TemperatureSensor::errorlevel()
{
	int Test = 0;
	ErrorLevel = (!Test)?1:0;
	return ErrorLevel;
}
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////FONCTIONS///////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
void TemperatureSensor::readData()
{
	int Test = analogRead(Pin);
	Resistance = (float)((1023-Test)*10000/Test);
	Temperature = 1/(log(Resistance/10000)/THERMISTOR_VAL+1/298.15)-273.15;
}
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////